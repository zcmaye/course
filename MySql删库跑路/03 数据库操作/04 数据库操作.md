# 数据库的基本操作

## SQL是什么？它能做什么？

对数据库进行查询和修改操作的语言叫做 SQL（Structured Query Language，结构化查询语言）。SQL 语言是目前广泛使用的关系数据库标准语言，是各种数据库交互方式的基础。

> 著名的大型商用数据库 Oracle、DB2、Sybase、SQL Server，开源的数据库 PostgreSQL、MySQL，甚至一些小型的数据库 Access 等都支持 SQL。近些年蓬勃发展的 NoSQL 系统最初是宣称不再需要 SQL 的，后来也不得不修正为 Not Only SQL，来拥抱 SQL。

SQL 是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统。

SQL 具有如下优点。

1. 一体化：SQL 集数据定义、数据操作和数据控制于一体，可以完成数据库中的全部工作。
2. 使用方式灵活：SQL 具有两种使用方式，可以直接以命令方式交互使用；也可以嵌入使用，嵌入C、C++、Fortran、COBOL、Java 等语言中使用。
3. 非过程化：只提操作要求，不必描述操作步骤，也不需要导航。使用时只需要告诉计算机“做什么”，而不需要告诉它“怎么做”，存储路径的选择和操作的执行由数据库管理系统自动完成。
4. 语言简洁、语法简单：该语言的语句都是由描述性很强的英语单词组成，而且这些单词的数目不多。



SQL语言共分为四大类：

**1）数据定义语言（Data Definition Language，DDL）**

用来创建或删除数据库以及表等对象，主要包含以下几种命令：

- DROP：删除数据库和表等对象
- CREATE：创建数据库和表等对象
- ALTER：修改数据库和表等对象的结构

**2）数据操作语言（Data Manipulation Language，DML）**

用来变更表中的记录，主要包含以下几种命令：

- SELECT：查询表中的数据
- INSERT：向表中插入新数据
- UPDATE：更新表中的数据
- DELETE：删除表中的数据

**3）数据查询语言（Data Query Language，DQL）**

用来查询表中的记录，主要包含 SELECT 命令，来查询表中的数据。

**4）数据控制语言（Data Control Language，DCL）**

用来确认或者取消对数据库中的数据进行的变更。除此之外，还可以对数据库中的用户设定权限。主要包含以下几种命令：

- GRANT：赋予用户操作权限
- REVOKE：取消用户的操作权限
- COMMIT：确认对数据库中的数据进行的变更
- ROLLBACK：取消对数据库中的数据进行的变更



**拓展**

标准 SQL 是指符合国际标准的 SQL，而非某个数据库厂商的 SQL 语法（如：Microsoft SQL Server 的 T-SQL，Oracle 的 PL/SQL，MySQL）。

标准 SQL 可以在任何数据库中使用，而数据库厂商的 SQL 只适合它们对应的数据库，如 T-SQL 只适合 Microsoft SQL Server。

本课程讲解的 SQL 是专门针对 MySQL 的，虽然多数语法也适用于其它 DBMS，但不是所有 SQL 语法都是完全可移植的。 



## SQL的基本书写规则

使用SQL语句请遵循以下规范：

+ SQL语句不区分大小写。但字符串常量区分大小写，建议命令大写，表名库名小写；
+ SQL语句可单行或多行书写，以分号结尾；
+ 用空格和缩进来提高语句的可读性。
+ 注释：有三种风格的注释
  1. 单行注释可以用“#”
  2. 单行注释第二种写法用“-- ”，“--" 与注释之间是有空格的。
  3. 多行注释可以用/* */



## 查询所有数据库

数据库可以看作是一个专门存储数据对象的容器，每一个数据库都有唯一的名称，并且数据库的名称都是有实际意义的，这样就可以清晰的看出每个数据库用来存放什么数据。在 MySQL数据库中存在系统数据库和自定义数据库，系统数据库是在安装 MySQL 后系统自带的数据库，自定义数据库是由用户定义创建的数据库。

```mysql
show databases;
```

```reStructuredText
+--------------------+
| Database           |
+--------------------+
| information_schema |		#主要存储了系统中的一些数据库对象信息，比如用户表信息、列信息、权限信息、字符集信息和分区信息等。
| mysql              |		#MySQL的核心数据库，主要负责存储数据库用户、用户访问权限等 MySQL 自己需要使用的控制和管理信息。
| performance_schema |		#主要用于收集数据库服务器性能参数。
| sys                |		#sys 数据库主要提供了一些视图，数据都来自于 performation_schema，主要是让开发者和使用者更方便地查看性能问题。
+--------------------+
```



#### 创建数据库

```mysql
create database <dbname>;
```

如果数据库已经存在则会报错` Can't create database '<dbname>'; database exists`，我们可以先判断数据库是否存在，不存在就创建，存在则忽略(只有警告没有报错)。

```mysql
create database if not exists  <dbname>;
```



#### 选择使用数据库

```mysql
use <dbname>;
select database();		#查看当前使用的是哪个数据库
```



#### 删除数据库

```mysql
drop database <dbname>;
```

同样可以判断数据库是否存在

```mysql
drop database if not exists <dbname>;
```

使用 DROP DATABASE 命令时要非常谨慎，在执行该命令后，MySQL 不会给出任何提示确认信息。DROP DATABASE 删除数据库后，数据库中存储的所有数据表和数据也将一同被删除，而且不能恢复。





