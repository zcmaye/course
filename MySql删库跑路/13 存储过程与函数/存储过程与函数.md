# 第13章 存储过程与函数

MySql从5.0版本开始支持存储过程和函数，存储过程和函数能够将复杂的SQL逻辑封装在一起，应用程序无须关注存储过程和函数内部复杂的SQL逻辑，而只需要简单地条用存储过程和函数即可。

## 1. 存储过程概述

### 1.1概念

存储过程(Stroed Procedure)，它的思想很简单，他就是一组经过预先编译的SQL语句的封装。

存储过程预先存储在MySQL服务器上，需要执行的时候，客户端只需要向服务器发出调用存储过程的命令，服务器就可以把预先存储好的这一系列SQL语句全部执行。

**好处：**

+ 简化操作，提高了SQL语句的重用性，减少了开发程序员的压力
+ 减少操作过程中的失误，提高效率
+ 减少网络传输量(客户端不需要把所有的SQL语句通过网络发送给服务器)
+ 减少了SQL语句暴露在网上的分线，也提高了数据查询的安全性

### 1.2 参数分类

存储过程的参数可以是IN、OUT、INOUT。

+ IN 表示传入参数
+ OUT 表示传出参数
+ INOUT 表示即可以传入也可以传出
+ 也可以不写参数
+ 也可以多多个不同类型的参数

## 2. 创建存储过程

### 2.1 语法分析

```mysql
CREATE PROCEDURE [IF NOT EXISTS] 存储过程名([IN|OUT|INOUT 参数名 参数类型,...])
[charcateristics ...]
BEGIN
	存储过程体
END
```

> 存储过程名不能与已经存在的存储过程名重名。推荐存储过程名命名为procedure_xxx 或者 proce_xxx。

**charcateristics可选参数为：**

```mysql
LANGUAGE SQL
| [NOT] DETERMINISTTIC
| {CONTAINS SQL|NO SQL|READS SQL DATA|MODIFIES SQL DATA}
| SQL DECURITY {DEFINER|INVOKER}
| COMMENT 'string'
```

