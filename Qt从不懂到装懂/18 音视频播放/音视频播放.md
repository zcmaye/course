[LAV filters](http://forum.doom9.org/showthread.php?t=156191)

## 播放内存中的音乐

```cpp
    QFile read("./music/Nevada.mp3");
    if (!read.open(QIODevice::ReadOnly))
    {
        qDebug() << "文件打开失败，请重试~";
    }
    //下面用的对象，必须动态申请，不然构造函数执行完毕，局部变量内存会被释放
    QByteArray *data = new QByteArray(read.readAll());
    read.close();

    QBuffer *buffer = new QBuffer(data，this);
    if (!buffer->open(QIODevice::ReadWrite))
    {
        qDebug() << "buffer error";
    }
    //qDebug() << data;
	QMediaPlayer *player = new QMediaPlayer(this);
    player->setMedia(QMediaContent()，buffer);
    player->play();
```

## 播放内存中的视频

```cpp
    QMediaPlayer *player = new QMediaPlayer(this);
    player->setMedia(QUrl("./music/MMD.mp4"));
    player->play();

    QVideoWidget* videowidget = new QVideoWidget(this);
    player->setVideoOutput(videowidget);
```

vs中如果提示编译器堆空间不足，则打开vcxproj工程文件，在PropertyGroup中添加如下代码

```cpp
<PropertyGroup Label="Globals">
    <!-- 资源文件加载，防止编译器堆空间不足 -->
     <PreferredToolArchitecture>x64</PreferredToolArchitecture> 
</PropertyGroup>
```



# 音视频播放

Qt对音视频的播放和控制﹑相机拍照，收音机等多媒体应用提供了强大的支持Qt 5使用了全新的Qt Multimedia模块来实现多媒体应用。Qt Multimedia模块提供了丰富的接口，使读者以轻松地使用平台的多媒体功能，例如，进行媒体播放﹑使用相机和收音机等。

C＋＋中多媒体模块可以实现的功能以及需要使用的C＋＋类如下表所示：

| 功能                     | 类                                               |
| ------------------------ | :----------------------------------------------- |
| 播放音效                 | QSoundEffect                                     |
| 播放低延迟音频           | QAudioOutput                                     |
| 播放编码音频(MP3、AAC等) | QMediaPlayer                                     |
| 访问原始音频输入数据     | QAudioInput                                      |
| 录制编码音频数据         | QAudioRecorder                                   |
| 发现原始音频设备         | QAudioDeviceInfo                                 |
| 播放视频                 | QMediaPlayer、QVideoWidget、QGraphicsVideoItem   |
| 处理视频                 | QMediaPlayer、QAbstractVideoSurface、QVideoFrame |
| 收听录音机               | QRadioTuner、QRadioData                          |
| 访问相机取景器           | QCamera、QVideoWidget、QGraphicsVideoItem        |
| 处理取景器               | QCamera、QAbstractVideoSurface、QVideoFrame      |
| 拍摄照片                 | QCamera、QCameraImageCapture                     |
| 拍摄视频                 | QCamera、QMediaRecorder                          |

## 播放音频

在Qt中，要想使计算机发出响声，最简单的方法是调用QApplication : : beep()静态函数。而Qt Multimedia模块中提供了多个类来实现不同层次的音频输入，输出和处理。

### QSoundEffect

QSoundEffect类提供了一种播放低延迟声音效果的方法 。

这个类允许你以较低的延迟方式播放未压缩的音频文件(通常是WAV文件)，并且适用于“反馈”类型的声音，以响应用户的动作(例如虚拟键盘声音，弹出对话框的正面或负面反馈，或游戏声音)。 如果低延迟不重要，可以考虑使用QMediaPlayer类，因为它支持更广泛的媒体格式，并且资源消耗更少。  

下面的例子展示了如何播放一个循环的，有点安静的声音效果：

```cpp
```



