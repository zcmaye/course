# 数据库日志

对于线上数据库应用系统，突然遭遇数据库宕机怎么办？在这种情况下，定位宕机的原因就非常关键。我们可以查看数据库的错误日志。因为日志中记录了数据库运行中的诊断信息，包括了错误、警告和注释等信息。比如：从日志中发现某个连接中的SQL操作发生了死循环，导致内存不足，被系统强行终止了。明确了原因，处理起来也就轻松了，系统很快就恢复了运行。

除了发现错误，日志在数据复制、数据恢复、操作审计，以及确保数据的永久性和一致性等方面，都有着不可替代的作用。

干万不要小看日志。很多看似奇怪的问题，答案往往就藏在日志里。很多情况下，只有通过查看日志才能发现问题的原因，真正解决问题。所以，一定要学会查看日志，养成检查日志的习惯，对提升你的数据库应用开发能力至关重要。

MySQL8.0官网日志地址：[MySQL :: MySQL 8.4 Reference Manual :: 7.4 MySQL Server Logs](https://dev.mysql.com/doc/refman/8.4/en/server-logs.html)

## 1. MySQL支持的日志

MySQL 服务器有多个日志文件，可帮助您了解正在进行的活动。

### 日志类型

主要有六大日志：

+ **慢查询日志（Slow query log）：**记录所有执行时间超过`long_query_time`的所有查询，方便我们对查询进行优化。
+ **通用查询日志（General query log）：**记录所有连接的起始时间和终止时间，以及连接发送给数据库服务器的所有指令，对我们复原操作的实际场景、发现问题，甚至是对数据库操作的审计都有很大的帮助。
+ **错误日志（Error log）：**记录MySQL服务的启动、运行或停止MySQL服务时出现的问题，方便我们了解服务器的状态，从而对服务器进行维护。
+ **二进制日志（Binary log）：**记录所有更改数据的语句，可以用于主从服务器之间的数据同步，以及服务器遇到故障时数据的无损失恢复。
+ **中继日志（Relay log）：**用于主从服务器架构中，从服务器用来存放主服务器二进制日志内容的一个中间文件。从服务器通过读取中继日志的内容，来同步主服务器上的操作。
+ **DDL语句日志（DDL log）：**记录数据定义语句执行的元数据操作。

除二进制日志、中继日志外，其他日志都是**文本文件** 。默认情况下，所有日志创建于 MySQL数据目录中。

### 日志弊端

+ 日志功能会降低MySQL数据库的性能。例如，在查询非常频繁的MySQL数据库系统中，如果开启了通用查询日志和慢查询日志，MySQL数据库会花费很多时间记录日志。
+ 日志会占用大量的磁盘空间。对于用户量非常大、操作非常频繁的数据库，日志文件需要的存储空间设置比数据库文件需要的存储空间还要大。

## 2. 慢查询日志（slow query log）

慢查询日志在《16 性能分析(慢查询、执行计划)》已经详细讲过。

## 3. 通用查询日志（general query log）

通用查询日志是MySQL服务器所做工作的通用记录。包括客户端连接或断开连接时时间，并记录从客户端接收到的每个 SQL 语句。当您怀疑客户端存在错误并想确切了解客户端发送给服务器的内容时，通用查询日志会非常有用。

MySQL会按照接收到的顺序将语句写入查询日志，而这些语句的执行顺序可能与接收顺序不同。这种日志记录顺序与二进制日志不同，对于二进制日志而言，语句是在执行完毕后、释放任何锁之前才被写入的。此外，查询日志中可能包含仅用于查询(SELECT)数据的语句，因为这类语句永远不会被写入二进制日志中。

### 查看日志状态

默认情况下，**通用查询日志是禁用的**。

```sql
mysql> SHOW VARIABLES LIKE 'general_log%';
+------------------+-------------------------------+
| Variable_name    | Value                         |
+------------------+-------------------------------+
| general_log      | OFF                           |
| general_log_file | /var/lib/mysql/maye-vm-pc.log |
+------------------+-------------------------------+
2 rows in set (0.04 sec)
```

`general_log`是通用日志启用状态，`general_log_file`是通用日志文件。

### 启用通用日志

若要明确指定初始的通用查询日志状态，请使用 --general_log[={0|1}]。不提供参数或提供参数 1 时，--general_log 会启用日志。提供参数 0 时，此选项会禁用日志。若要指定日志文件名，请使用 --general_log_file=file_name。若要指定日志输出目的地，请使用 log_output 系统变量。

#### 直接设置变量

+ 开启通用日志

```sql
SET GLOBAL general_log = ON;
SET PERSIST general_log = ON;	-- 持久化
```

+ 设置日志文件保存位置

```sql
SET GLOBAL general_log_file='path/filename';
```

#### 配置文件

修改`mysqld.cnf`或`my.ini`配置文件来设置，在`[mysqld]`组下加入选项，并重启MySQL服务器：

```ini
[mysqld]
general_log=ON
general_log_file=path
```

> Linux配置文件一般在：/etc/mysql/mysql.conf.d/mysqld.cnf

### 查看日志

通用查询日志是以**文本文件**的形式存储在文件系统中的，可以使用**文本编辑器**直接打开日志文件。每台MySQL服务器的通用查询日志内容是不同的。

+ 在Windows操作系统中，使用文本文件查看器；

+ 在Linux系统中，可以使用vi工具或者gedit工具查看；

+ 在Mac OSX系统中，可以使用文本文件查看器或者vi等工具查看。

从`SHOW VARIABLES LIKE 'general_log%';` 结果中可以看到通用查询日志的位置。

启用查询日志之后，可以执行一些语句看是否记录到了日志中：

```sql
mysql> SELECT * FROM emp;
mysql> DELETE FROM emp WHERE empno = 7934;
mysql> INSERT INTO emp VALUES(1001,'HDY','TEACHER',NULL,NOW(),8000,NULL,40);
mysql> UPDATE emp SET comm=300 WHERE empno=1001;
```

查看通用查询日志，可以看到如下信息：

```css
root@maye-vm-pc:~# cat /var/lib/mysql/maye-vm-pc.log
/usr/sbin/mysqld, Version: 8.4.7 (MySQL Community Server - GPL). started with:
Tcp port: 3306  Unix socket: /var/run/mysqld/mysqld.sock
Time                 Id Command    Argument
2026-01-14T06:40:10.517995Z        29 Quit
2026-01-14T06:40:28.075596Z        30 Connect   root@localhost on  using Socket
2026-01-14T06:40:28.075728Z        30 Query     select @@version_comment limit 1
2026-01-14T06:40:39.389252Z        30 Query     SELECT DATABASE()
2026-01-14T06:40:39.389468Z        30 Init DB   hdy
2026-01-14T06:40:39.390361Z        30 Query     show databases
2026-01-14T06:40:39.390906Z        30 Query     show tables
2026-01-14T06:40:39.391936Z        30 Field List        bonus 
2026-01-14T06:40:39.392660Z        30 Field List        dept 
2026-01-14T06:40:39.392795Z        30 Field List        emp 
2026-01-14T06:40:39.392935Z        30 Field List        salgrade 
2026-01-14T06:40:41.092726Z        30 Query     SELECT * FROM emp
2026-01-14T06:40:48.236301Z        30 Query     DELETE FROM emp WHERE empno = 7934
2026-01-14T06:40:56.924343Z        30 Query     INSERT INTO emp VALUES(1001,'HDY','TEACHER',NULL,NOW(),8000,NULL,40)
2026-01-14T06:41:01.948334Z        30 Query     UPDATE emp SET comm=300 WHERE empno=1001
```

在通用查询日志里面，我们可以清楚地看到，什么时候开启了新的客户端登陆数据库，登录之后做了什么 SQL 操作，针对的是哪个数据表等信息。

### 删除/刷新日志

如果数据的使用非常频繁，那么通用查询日志会占用服务器非常大的磁盘空间。数据管理员可以删除很长时间之前的查询日志，以保证MySQL服务器上的硬盘空间。

#### 手动删除日志文件

直接使用命令手动删除日志文件即可！

```bash
sudo rm /var/lib/mysql/maye-vm-pc.log
```

但是注意，删除之后再执行SQL查询语句时，不会自动创建文件！而且自己创建同名文件之后，日志也不会被记录到文件中！！坑！！

#### 刷新日志文件

所以，删除文件之后必须使用mysql的工具来刷新日志，会自动创建日志文件(前提是`general_log`必须是ON)。

```bash
sudo mysqladmin -uroot -p flush-logs general
```

当然，这个也可以直接截断日志文件，也就是说不需要手动删除了！

## 4. 错误日志（Error log）

错误日志记录了MySQL服务器启动、停止运行的时间，以及系统启动、运行和停止过程中的诊断信息，包括错误、警告和提示等。

通过错误日志可以查看系统的运行状态，便于即时发现故障、修复故障。如果MySQL服务出现异常，错误日志是发现问题、解决故障的首选。

### 查看日志

在MySQL数据库中，错误日志功能是无法被关闭的，也就是说错误必须被记录 。

```sql
mysql> SHOW VARIABLES LIKE 'log_error%';
+----------------------------+----------------------------------------+
| Variable_name              | Value                                  |
+----------------------------+----------------------------------------+
| log_error                  | /var/log/mysql/error.log               |
| log_error_services         | log_filter_internal; log_sink_internal |
| log_error_suppression_list |                                        |
| log_error_verbosity        | 2                                      |
+----------------------------+----------------------------------------+
4 rows in set (0.00 sec)
```

从输出结果可以看出，错误日志文件在默认在` /var/log/mysql `目录中，名称默认为 `error.log` （Linux系统）。如果需要指定文件名，则需要在`mysqld.cnf`或者`my.ini`中做如下配置：

```ini
[mysqld]
log-error=[path/[filename]]
```

查看日志文件内容：

```sql
root@maye-vm-pc:~# cat /var/log/mysql/error.log 
2026-01-09T07:29:58.414788Z 0 [System] [MY-015017] [Server] MySQL Server Initialization - start.
2026-01-09T07:29:58.416194Z 0 [System] [MY-013169] [Server] /usr/sbin/mysqld (mysqld 8.4.7) initializing of server in progress as process 9824
2026-01-09T07:29:58.438104Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.
2026-01-09T07:29:58.949010Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.
2026-01-09T07:30:00.494741Z 6 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.
2026-01-09T07:30:02.809059Z 0 [System] [MY-015018] [Server] MySQL Server Initialization - end.
2026-01-09T07:30:02.859699Z 0 [System] [MY-015015] [Server] MySQL Server - start.
2026-01-09T07:30:03.073917Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.4.7) starting as process 9867
2026-01-09T07:30:03.081694Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started.
2026-01-09T07:30:03.927704Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended.
2026-01-09T07:30:04.577834Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.
2026-01-09T07:30:04.577879Z 0 [System] [MY-013602] [Server] Channel mysql_main configured to support TLS. Encrypted connections are now supported for this channel.
```

### 删除/刷新日志

对于很久以前的错误日志，数据库管理员查看这些错误日志的可能性不大，可以将这些错误日志删除，以保证MySQL服务器上的硬盘空间 。MySQL的错误日志是以文本文件的形式存储在文件系统中的，可以直接删除 。

+ 错误日志文件，必须要手动删除或备份一下：

```bash
mv /var/log/mysql/error.log /var/log/mysql/error.log.1
```

+ 然后，刷新日志文件。

```sql
mysqladmin -uroot -p flush-logs error
```

这样，又会创建一个新的日志文件了。

## 5. 二进制日志（binlog）

binlog可以说是MySQL中比较重要的日志了，在日常开发及运维过程中，经常会遇到。

binlog即binary log，二进制日志文件，也叫作变更日志（update log）。它记录了数据库所有执行的DDL和DML等数据库更新事件的语句，但是不包含没有修改任何数据的语句（如数据查询语句select、show等）。

它以事件形式记录并保存在二进制文件中。通过这些信息，我们可以再现数据更新操作的全过程。

**binlog主要应用场景：**

+ 一是用于**数据恢复**，如果MySQL数据库意外停止，可以通过二进制日志文件来查看用户执行了哪些操作，对数据库服务器文件做了哪些修改，然后根据二进制日志文件中的记录来恢复数据库服务器。
+  二是用于**数据复制**，由于日志的延续性和时效性，master把它的二进制日志传递给slaves来达到master-slave数据一致的目的。

可以说MysQL数据库的数据备份、主备、主主、主从都离不开binlog，需要依靠binlog来同步数据，保证数据一致性。

![image-20260114154012322](./assets/image-20260114154012322.png)

### 查看日志默认情况

默认情况下，二进制日志是开启的：

```sql
mysql> SHOW VARIABLES LIKE 'log_bin%';
+---------------------------------+-----------------------------+
| Variable_name                   | Value                       |
+---------------------------------+-----------------------------+
| log_bin                         | ON                          |
| log_bin_basename                | /var/lib/mysql/binlog       |
| log_bin_index                   | /var/lib/mysql/binlog.index |
| log_bin_trust_function_creators | OFF                         |
+---------------------------------+-----------------------------+
4 rows in set (0.00 sec)
```

+ **log_bin_basename：**是binlog日志的基本文件名，后面会追加表示来表示每一个文件；
+ **log_bin_index：**是binglog文件的索引文件，这个文件管理所有的binglog文件的列表；

+ **log_bin_trust_function_creators：**限制存储过程，前面我们已经讲过了，这是因为二进制日志的一个重要功能是用于主从复制，而存储函数有可能导致主从的数据不一致。所以当开启二进制日志后，需要限制存储函数的创建、修改、调用。

### 日志参数设置

#### 配置文件

通过配置文件修改二进制日志相关参数：

```ini
[mysqld]
log-bin=hdy-bin
binlog_expire_logs_seconds=2591000
max_binlog_size=100M
```

+ **log-bin：**用于指定生成的二进制日志文件名，比如：将`log-bin`设置为`hdy-bin`，那么最后的日志文件名将是 `/var/lib/mysql/hdy-bin.xxxx`

+ **binlog_expire_logs_seconds：**是二进制日志保存的时长，超过时长则会自动清除过期的文件；默认是`2592000s`，即30天；
+ **max_binlog_size：**控制单个二进制日志大小，当前日志文件大小超过此变量时，执行切换动作。此参数的最大和**默认值是1GB**，该设置并不能严格控制Binlog的大小，尤其是Binlog比较靠近最大值而又遇到一个比较大事务时，为了保证事务的完整性，可能不做切换日志的动作，只能将该事务的所有SQL都记录进当前日志，直到事务结束。一般情况下可采取默认值。

使用`systemctl restart mysql`命令重启服务器，然后查看二进制日志信息：

```sql
mysql> SHOW VARIABLES LIKE 'log_bin%';
+---------------------------------+------------------------------+
| Variable_name                   | Value                        |
+---------------------------------+------------------------------+
| log_bin                         | ON                           |
| log_bin_basename                | /var/lib/mysql/hdy-bin       |
| log_bin_index                   | /var/lib/mysql/hdy-bin.index |
| log_bin_trust_function_creators | OFF                          |
+---------------------------------+------------------------------+
4 rows in set (0.00 sec)
```

然后查看一下日志文件：

```bash
root@maye-vm-pc:~# ls -lsh /var/lib/mysql
4.0K -rw-r----- 1 mysql mysql  158  1月 14 16:01  hdy-bin.000001
4.0K -rw-r----- 1 mysql mysql   17  1月 14 16:01  hdy-bin.index
```

可以发现已经创建了，新的binlog日志文件。

**修改日志文件目录和名称**

如果想要改变日志文件的目录和名称，可以直接在`log-bin`选项后面写上路径：

```ini
log-bin="/var/lib/mysql/binlog/hdy-bin"
```

然后重启服务器，会发现报错了：

```sql
root@maye-vm-pc:~# systemctl restart mysql
Job for mysql.service failed because the control process exited with error code.
See "systemctl status mysql.service" and "journalctl -xeu mysql.service" for details.
```

这个时候，我们可以查看一下错误日志：

```sql
root@maye-vm-pc:~# cat /var/log/mysql/error.log
2026-01-14T08:09:10.727488Z 0 [System] [MY-015015] [Server] MySQL Server - start.
2026-01-14T08:09:10.934602Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.4.7) starting as process 4841
mysqld: File '/var/lib/mysql/binlog/hdy-bin.index' not found (OS errno 2 - No such file or directory)
2026-01-14T08:09:10.937328Z 0 [ERROR] [MY-010119] [Server] Aborting
2026-01-14T08:09:10.938336Z 0 [System] [MY-010910] [Server] /usr/sbin/mysqld: Shutdown complete (mysqld 8.4.7)  MySQL Community Server - GPL.
```

从错误日志文件中可以看出，是没有`/var/lib/mysql/binlog/hdy-bin.index`这样的文件或者目录，看吧，错误日志文件还是有用的！！！

先创建`binlog`目录：

```bash
mkdir /var/lib/mysql/binlog
```

然后修改`binglog`目录的所有者：

```bash
chown -R -v mysql:mysql /var/lib/mysql/binlog
```

接着再重启服务器，即可成功：

```bash
systemctl restart mysql
```

最后查看一下日志信息，发现日志文件路径和名称都变了：

```sql
mysql> SHOW VARIABLES LIKE 'log_bin%';
+---------------------------------+-------------------------------------+
| Variable_name                   | Value                               |
+---------------------------------+-------------------------------------+
| log_bin                         | ON                                  |
| log_bin_basename                | /var/lib/mysql/binlog/hdy-bin       |
| log_bin_index                   | /var/lib/mysql/binlog/hdy-bin.index |
| log_bin_trust_function_creators | OFF                                 |
+---------------------------------+-------------------------------------+
4 rows in set (0.04 sec)
```

> **提示：**数据库文件最好不要与日志文件放在同一个磁盘上！这样，当数据库文件所在的磁盘发生故障时，可以使用日志文件恢复数据。

#### 临时修改

直接在服务器启动之后，通过变量去设置就好了，不再赘述。

### 查看日志

当MySQL创建二进制日志文件时，先创建一个以“filename”为名称、以“index”为后缀的文件，再创建一个以“filename”为名称、以“.0000o1”为后缀的文件。

MySQL服务重新启动一次，以“000001”为后缀的文件就会增加一个，并且后缀名按1递增。即日志文件的个数与MySQL服务启动的次数相同；如果日志长度超过了`max_binlog_size`的上限（默认是1GB），就会创建一个新的日志文件。

#### 日志文件列表及大小

查看当前的二进制日志文件列表及大小。指令如下：

```sql
mysql> SHOW BINARY LOGS;
+----------------+-----------+-----------+
| Log_name       | File_size | Encrypted |
+----------------+-----------+-----------+
| hdy-bin.000001 |       181 | No        |
| hdy-bin.000002 |       158 | No        |
+----------------+-----------+-----------+
2 rows in set (0.00 sec)
```

接下来我们先做点数据的更新，然后查看日志内容：

```sql
mysql> SELECT * FROM emp;
+-------+--------+-----------+------+------------+---------+------+--------+
| empno | ename  | job       | mgr  | hiredate   | sal     | comm | deptno |
+-------+--------+-----------+------+------------+---------+------+--------+
|  1001 | HDY    | TEACHER   | NULL | 2026-01-14 | 8000.00 |  300 |     40 |
|  7369 | SMITH  | CLERK     | 7902 | 2010-12-17 | 3800.00 | NULL |     20 |
|  7499 | ALLEN  | SALESMAN  | 7698 | 2011-02-20 | 4600.00 |  300 |     30 |
|  7521 | WARD   | SALESMAN  | 7698 | 2011-02-22 | 4250.00 |  500 |     30 |
|  7566 | JONES  | MANAGER   | 7839 | 2011-04-02 | 6975.00 | NULL |     20 |
|  7654 | MARTIN | SALESMAN  | 7698 | 2011-09-28 | 4250.00 | 1400 |     30 |
|  7698 | BLAKE  | MANAGER   | 7839 | 2011-05-01 | 5850.00 | NULL |     30 |
|  7782 | CLARK  | MANAGER   | 7839 | 2011-06-09 | 5450.00 | NULL |     10 |
|  7788 | SCOTT  | ANALYST   | 7566 | 2017-04-19 | 6000.00 | NULL |     20 |
|  7839 | KING   | PRESIDENT | NULL | 2011-11-17 | 8000.00 | NULL |     10 |
|  7844 | TURNER | SALESMAN  | 7698 | 2011-09-08 | 4500.00 |    0 |     30 |
|  7876 | ADAMS  | CLERK     | 7788 | 2017-05-23 | 4100.00 | NULL |     20 |
|  7900 | JAMES  | CLERK     | 7698 | 2011-12-03 | 3950.00 | NULL |     30 |
|  7902 | FORD   | ANALYST   | 7566 | 2011-12-03 | 6000.00 | NULL |     20 |
+-------+--------+-----------+------+------------+---------+------+--------+
14 rows in set (0.02 sec)

mysql> INSERT INTO emp VALUE(1002,'maye','teacher',NULL,NOW(),6000,NULL,40);
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> UPDATE emp SET ename = 'zc' WHERE empno=1002;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0
```

然后再次查看日志文件列表及大小：

```sql
mysql> SHOW BINARY LOGS;
+----------------+-----------+-----------+
| Log_name       | File_size | Encrypted |
+----------------+-----------+-----------+
| hdy-bin.000001 |       181 | No        |
| hdy-bin.000002 |       819 | No        |
+----------------+-----------+-----------+
2 rows in set (0.00 sec)
```

发现文件变大了，也就是操作已经记录到日志中了。

#### 查看日志文件内容

##### mysqlbinlog

但binlog是二进制文件，无法直接查看，想要更直观的观测它就要借助`mysqlblnlog`命令工具了。指令如下：

```bash
mysqlbinlog -v "/var/lib/mysql/binlog/hdy-bin.000002"
```

输出内容部分如下：

```sql
BINLOG '
lllnaRMBAAAAQgAAAIEBAAAAAF4AAAAAAAEAA2hkeQADZW1wAAgCDw8CCvYCAgYoACQABwL+AQEA
AgP8/wAX6Esf
lllnaR4BAAAAPAAAAL0BAAAAAF4AAAAAAAEAAgAI/0jqAwRtYXllB3RlYWNoZXIu1A+AF3AAKADz
EUTp
'/*!*/;
### INSERT INTO `hdy`.`emp`
### SET
###   @1=1002
###   @2='maye'
###   @3='teacher'
###   @4=NULL
###   @5='2026:01:14'
###   @6=6000.00
###   @7=NULL
###   @8=40
# at 445
#260114 16:53:42 server id 1  end_log_pos 476 CRC32 0xd920707f  Xid = 17
COMMIT/*!*/;
```

还有其他的一些选项：

+ `--base64-output=DECODE-ROWS`选项，不显示binglog格式的SQL语句(其实是base64编码格式)。

```bash
mysqlbinlog -v --base64-output=DECODE-ROWS "/var/lib/mysql/binlog/hdy-bin.000002"
```

+ 结合`-vv`选项，显示完整的DML语句，并注释掉这些语句。

```bash
mysqlbinlog -vv --base64-output=DECODE-ROWS "/var/lib/mysql/binlog/hdy-bin.000002"
```

输出如下：

```sql
#260114 16:53:42 server id 1  end_log_pos 445 CRC32 0xe94411f3  Write_rows: table id 94 flags: STMT_END_F
### INSERT INTO `hdy`.`emp`
### SET
###   @1=1002 /* SHORTINT meta=0 nullable=0 is_null=0 */
###   @2='maye' /* VARSTRING(40) meta=40 nullable=1 is_null=0 */
###   @3='teacher' /* VARSTRING(36) meta=36 nullable=1 is_null=0 */
###   @4=NULL /* SHORTINT meta=0 nullable=1 is_null=1 */
###   @5='2026:01:14' /* DATE meta=0 nullable=1 is_null=0 */
###   @6=6000.00 /* DECIMAL(7,2) meta=1794 nullable=1 is_null=0 */
###   @7=NULL /* SHORTINT meta=0 nullable=1 is_null=1 */
###   @8=40 /* SHORTINT meta=0 nullable=1 is_null=0 */
# at 445
#260114 16:53:42 server id 1  end_log_pos 476 CRC32 0xd920707f  Xid = 17
COMMIT/*!*/;
```

+ 查看最后20行记录

```bash
mysqlbinlog --no-defaults -vv --base64-output=DECODE-ROWS "/var/lib/mysql/binlog/hdy-bin.000002" | tail -20
```

##### SHOW BINGLOG

上面这种办法读取出binlog日志的全文内容比较多，不容易分辨查看到pos点信息，下面介绍一种更为方便的SQL查询命令：

[MySQL日志详解——日志分类、二进制日志bin log、回滚日志undo log、重做日志redo log-腾讯云开发者社区-腾讯云](https://cloud.tencent.com/developer/article/2493872)
